# VVSU Timetable Bot
__Telegram__ бот для студентов ВВГУ. Отправляет расписание вашей группы по команде.
## Зачем?
Иногда так не хочется _лезть в браузер, заходить в личный кабинет..._
Хочется прямо во время беседы с группой в телеграм чате __отправить одну 
простую комманду и получить расписание на эту неделю.__
## Как работает?
Две простые команды:
```
/start
/timetable
```
Каждый указанный период времени запускается задание Celery,
которое в свою очередь запускает скраппер на Selenium.
Он заходит в личный кабинет, открывает расписание и сохраняет скриншот,
который после будет нам отправлять по команде, и сохраняет время обновления.

Вместе с ботом поднимается __панель Flower__, внутри которой можно следить за выполнением
заданий в Celery. Зайти в неё можно через браузер по айпи вашего сервера, либо локалхосту на порту `:5555`
__Логин для панели__ `admin`
## Как запустить?
1. Создайте __Telegram бота__ и получите токен
2. Склонируйте этот репозиторий
3. Перейдите в его корневую папку
4. Создайте файл __.env__ и укажите в нем следующие переменные
```dotenv
TG_TOKEN=ВАШ_ТОКЕН_ДЛЯ_ТЕЛЕГРАМ_БОТА
LOGIN=ВАШ_ЛОГИН_ДЛЯ_ЛК_ВВГУ
PASSWORD=ВАШ_ПАРОЛЬ_ДЛЯ_ЛК_ВВГУ
FLOWER_PASS=ПАРОЛЬ_ДЛЯ_ПАНЕЛИ_FLOWER
UPDATE_RATE=ЧАСТОТА_ОБНОВЛЕНИЯ_РАСПИСАНИЯ_В_СЕКУНДАХ
```
Частоту обновления советую ставить не меньше чем 30 минут (1800 сек), расписание
даже в невероятно внезапные моменты __настолько часто не меняется.__
5. Соберите и запустите используя __docker-compose__ 
```commandline
docker-compose build
docker-compose up -d --restart unless-stopped
```
6. ***Всё работает, радуемся :-)***